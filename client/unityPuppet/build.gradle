import org.gradle.internal.os.OperatingSystem;

task build(type: Exec) {
    inputs.dir 'lib'
    inputs.dir 'src'
    inputs.file file("${project.name}.csproj")
    inputs.file file("${project.name}.sln")

    ext.dll = file('bin/Debug/unityPuppet.dll')
    outputs.file dll

    // Shell exec doesn't seem to find xbuild on the path unless
    // we specify its extension.
    if (OperatingSystem.current().isWindows()) {
        executable 'xbuild.bat'
    } else {
        executable 'xbuild'
    }
    args file("${project.name}.sln")
}

configurations {
    archives
}

artifacts {
    archives build.dll
}
